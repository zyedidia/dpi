local knit = import("knit")

local kernel = {}

function kernel.build(arch, board)
    local src = knit.glob("kernel/*.d")
    local arch = knit.glob(f"kernel/arch/$arch/*.d")
    local board = knit.glob(f"kernel/board/$board/*.d")

    return {
        files = knit.join(knit.join(src, arch), board),
        packages = {"-Ikernel", f"-Ikernel/arch/$arch", f"-Ikernel/board/$board"}
    }
end

return kernel
